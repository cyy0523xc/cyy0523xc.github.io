<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>数据明月</title>
  <meta name="author" content="Alex Cai">

  
  <meta name="description" content="心有沉香，何惧浮世！">
  
  

  <link rel="alternate" href="/atom.xml" title="数据明月" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  
</head>


<body>
  <header id="header" class="inner"><div class="site-name">
    数据明月 
    <span>心有沉香，何惧浮世！</span>
</div>

<nav>
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="http://github.com/cyy0523xc/">Github</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
</nav>
</header>
  <div id="content" class="inner">
  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/09/12/读书笔记：失控/">读书笔记：失控</a></h1>
  

    <time datetime="2014-09-12T12:58:56.000Z">
  <span class="day">12</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">这本书上一年就买好了，一直没有去看。最近才开始看，通常是中午午睡前一点，陆陆续续到现在才看110多页，趁今晚有时间就整理一下。</div><div class="line">    2014-09-12</div></pre></td></tr></table></figure>

<h2 id="人造与天生">人造与天生</h2>
<p>很多科幻片都会设计人与机器的问题，然而却没有带给大家太多关于最终宿命的思考，像黑客帝国中描绘的景象，会不会是人类最终的宿命？</p>
<ul>
<li>机器，正在生物化；而生物，正在工程化。</li>
<li>所有结构复杂的东西都被看做是机器，而所有能够自我维持的机器都被看作是有生命的。<code>活系统</code><ul>
<li>人造物表现得越来越像生命体；</li>
<li>生命变得越来越工程化。</li>
</ul>
</li>
</ul>
<h2 id="蜂群思维">蜂群思维</h2>
<p>关于蜂群的文章以前也看过不少，不过这么系统的分析还是第一次看</p>
<ul>
<li>涌现：当整体行为从各部分的有限行为里有规律的涌现时，身体与心智，整体与部分的二元性就真正的消失了。</li>
<li>蜂群思维的神奇在于，没有一只蜜蜂在控制它。</li>
<li>量变引起质变：大量的虫子聚集在一起，并且能相互交流，等到某一阶段，“集群”就会从虫子中涌现出来。</li>
<li>低层级的存在无法推断出高层级的复杂性：例如无法从单个蜜蜂体内推断蜂群的特性。</li>
<li>漩涡：满满的一槽水，当你拔去塞子，水就会自觉形成涡流。当水流完之后，漩涡到哪里去了？无论你多么了解水的特征，它都不会告诉你任何有关漩涡的特征。</li>
<li>活系统的特性：<ul>
<li>没有强制性的中心控制。</li>
<li>次级单位具有自治的特性。</li>
<li>次级单位之间彼此高度连接。</li>
<li>点对点之间的影响通过网络形成了非线性的因果关系。</li>
</ul>
</li>
<li>群逻辑试图理解不平衡性，度量不稳定性，测定不可预知性。</li>
<li>无数的个体思维聚在一起，形成了无可逆转的社会性。</li>
<li>网络不断孕育小故障，以此来避免大故障的频繁发生。正是其容纳错误而非杜绝错误的能力，使分布式存在成为学习，适应和进化的沃土。</li>
<li>网络是唯一有能力无偏见的发展或无引导的学习的组织形式。</li>
<li>如今的经济学家认为，只有把产品当服务来做，才能取得最佳的效果。你卖给顾客什么并不重要，重要的是你为顾客做了什么。这个东西是什么并不重要，重要的是他与什么相关联。</li>
</ul>
<h2 id="有心智的机器">有心智的机器</h2>
<ul>
<li>当某个系统能够正常运转时，不要扰乱它；要以它为基层来构建，原先的层级甚至不需要知道其上还有层级。</li>
<li>包容结构：是一种将机器人的传感器和执行器连接起来的并行分布式计算。</li>
<li>智能活动产生与“几乎各自离散的个体，为了几个各自独立的目的而结合的松散的联盟。”</li>
<li>“我”是我们内心世界的一个笼统外延，我们以此来区分自己和他人。</li>
<li>嵌套层级：在地位的层级里，信息和全力自上而下的单向传递；而在包容或网络层级架构里，信息和权力自下而上传递，或者由一边到另一边。</li>
<li>通用的分布式控制的第二个重要方面在于控制的分类聚合必须从底部开始渐进累加。</li>
<li>必须从简单的局部控制中衍生出分布式控制；必须从已有的且运作良好的简单系统上衍生出复杂系统。</li>
<li>行为代理：一个反射模块并非由另一个模块来通知它做什么，而是直接感知外部世界反射回来的信息，然后再通过对外部世界的作用把信息传递给他人。信息有可能丢失，而且丢失的频率还很高，但是没关系，因为代理会一遍又一遍的不断发送信息。</li>
<li>在包容控制的网络层级中，行为是通过抑制，延迟，激活等方式被遴选出来的。</li>
<li>设计机器人的经验<ul>
<li>递增式构建</li>
<li>传感器和执行器的紧密耦合（要低级反射，不要高级思考）</li>
<li>与模块无关的层级</li>
<li>分散控制</li>
<li>稀疏通讯（通过观察外部世界的结果，而非依赖导线来传递讯息）</li>
</ul>
</li>
<li>黑盲性精神错乱：失去感觉，心智就会陷入意淫，产生心理失明。</li>
<li>进化需要数量巨大的种群。</li>
<li>未来的新生物文明：人类是机器的祖先，而作为机器的我们本身也会得到设计改良。</li>
<li>自然进化强调我们是猿类，而人工进化则强调我们是有心智的机器。</li>
</ul>
<h2 id="组装复杂性">组装复杂性</h2>
<ul>
<li>火使草原有效的运转。</li>
<li>复杂的机器必定是逐步的，而且往往是简介的完善的。</li>
</ul>
<h2 id="共同进化">共同进化</h2>
<ul>
<li>在物质世界中，一件事对另一件事的影响随着两者之间的时间或者空间距离的增大而衰减。但是自然生态系统中的控制轨迹呈现的是发散状。</li>
<li>共同进化是互相影响的物种之间的交互的进化演变。任何个体只有接近自己变化中的邻居才能给自己带来变化。</li>
<li>除掉敌人既损害了掠食者的利益，也损害了被掠食者的利益。</li>
<li>如果一个昆虫和一种植物形成了共同进化，最终可能会形成一个独特的存在：一个鲜活的昆虫/植物系统。</li>
</ul>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/读书笔记/">读书笔记</a><a href="/tags/失控/">失控</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/09/12/vim中替换-M符号/">vim中替换^M符号</a></h1>
  

    <time datetime="2014-09-12T09:14:32.000Z">
  <span class="day">12</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>在使用git pull时，发生文件冲突，合并冲突时，发现行尾显示了很多 <strong>^M</strong> 的符号。这是一个特殊符号，可以使用替换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:%s/^M$//g</div></pre></td></tr></table></figure>

<p>注意：命令中的 <strong>^M</strong> 需要用“ <strong>CTRL-V CTRL-M</strong> ” 生成。</p>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/vim/">vim</a><a href="/tags/linux/">linux</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/09/11/hexo记录/">hexo记录</a></h1>
  

    <time datetime="2014-09-11T03:19:30.000Z">
  <span class="day">11</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="插入数学公式">插入数学公式</h3>
<p>Mathjax的语法和LaTeX一致，在markdown中直接插入即可(注意上面我们修改了mathjax默认的inlineMath选项)，下面举些例子，更多语法请参考 <a href="http://www.lsv.ens-cachan.fr/~markey/LaTeX/doc/Companion-chapter8.pdf" target="_blank" rel="external">LaTeX Higher Mathematics</a>：</p>
<p><a href="http://blog.163.com/goldman2000@126/blog/static/167296895201221242646561/" target="_blank" rel="external">LaTeX入门</a></p>
<p>插入方程组:</p>
<p>\begin{aligned}<br>\dot{x} &amp; = \sigma(y-x) \\<br>\dot{y} &amp; = \rho x - y - xz \\<br>\dot{z} &amp; = -\beta z + xy<br>\end{aligned}</p>
<p>插入矩阵：</p>
<p>\begin{bmatrix}<br>1 &amp; 2\\<br>3 &amp; 4<br>\end{bmatrix}</p>
<p>薛定谔方程：</p>
<p>$$ \hbar\frac{\partial \psi}{\partial t}<br>= \frac{-\hbar^2}{2m} \left(<br>\frac{\partial^2}{\partial x^2}</p>
<ul>
<li>\frac{\partial^2}{\partial y^2}</li>
<li>\frac{\partial^2}{\partial z^2}<br>\right<br>) \psi + V \psi. $$</li>
</ul>
<h3 id="自定义页面">自定义页面</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo n page <span class="string">"about"</span></div></pre></td></tr></table></figure>

<h3 id="加载慢的问题">加载慢的问题</h3>
<p>通常是因为加载外部资源超时，例如google开放的jquery库等。修改即可。</p>
<h3 id="常用命令">常用命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hexo clean  <span class="comment"># deploy到github时，有时需要先运行该命令，例如修改样式时</span></div><div class="line">hexo g</div><div class="line">hexo d</div><div class="line">hexo s</div><div class="line">hexo n <span class="string">"title"</span>   <span class="comment"># 生成文章</span></div></pre></td></tr></table></figure>


    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/hexo/">hexo</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/08/15/2014-08-15-vim命令汇总/">vim命令汇总</a></h1>
  

    <time datetime="2014-08-14T16:00:00.000Z">
  <span class="day">15</span><span class="month">8月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="vim_命令汇总">vim 命令汇总</h3>
<p><a href="http://www.cnblogs.com/softwaretesting/archive/2011/07/12/2104435.html" target="_blank" rel="external">http://www.cnblogs.com/softwaretesting/archive/2011/07/12/2104435.html</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 单词操作</span></div><div class="line">yw    复制单词</div><div class="line">dw    删除单词</div><div class="line"></div><div class="line"><span class="variable">n=</span>=   n行缩进</div><div class="line"></div><div class="line">.     重复刚才的命令</div><div class="line">z+f % 折叠代码</div></pre></td></tr></table></figure>


    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/linux/">linux</a><a href="/tags/vim/">vim</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/08/13/2014-08-13-ElasticSearch问题汇聚/">ElasticSearch问题汇聚</a></h1>
  

    <time datetime="2014-08-12T16:00:00.000Z">
  <span class="day">13</span><span class="month">8月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="es只允许本地访问">es只允许本地访问</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> iptables -I INPUT -p tcp --dport <span class="number">9200</span> -j DROP</div><div class="line"><span class="built_in">sudo</span> iptables -I INPUT <span class="operator">-s</span> <span class="number">127.0</span>.<span class="number">0.1</span> -p tcp --dport <span class="number">9200</span> -j ACCEPT</div></pre></td></tr></table></figure>

<h3 id="部署集群时出现：No_route_to_host">部署集群时出现：No route to host</h3>
<p>iptables的问题，清空里面的规则，关闭。</p>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/ElasticSearch/">ElasticSearch</a><a href="/tags/经验/">经验</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2014/02/11/2014-02-11-R对数组指定下标顺序输出/">R对数组指定下标顺序输出</a></h1>
  

    <time datetime="2014-02-10T16:00:00.000Z">
  <span class="day">11</span><span class="month">2月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="问题">问题</h3>
<figure class="highlight R"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; table(week.data[<span class="string">'星期'</span>])</div><div class="line"></div><div class="line">星期二 星期六 星期日 星期三 星期四 星期五 星期一 </div><div class="line">    <span class="number">34</span>     <span class="number">46</span>     <span class="number">37</span>     <span class="number">55</span>     <span class="number">40</span>     <span class="number">46</span>     <span class="number">65</span></div></pre></td></tr></table></figure>

<p>table函数可以统计各个值的频度，但是输出的顺序却不是我们所期待的（期待的顺序是从星期一到星期日）。特别是使用barplot生成柱状图时，如果不按顺序，那肯定是不行的。</p>
<h3 id="解决">解决</h3>
<figure class="highlight R"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">CaiSortByFields &lt;- <span class="keyword">function</span>(p.arr, p.fields) {</div><div class="line">  <span class="comment"># 把数组按照指定顺序输出</span></div><div class="line">  <span class="comment"># </span></div><div class="line">  <span class="comment"># Args：</span></div><div class="line">  <span class="comment">#   p.arr   数组数据</span></div><div class="line">  <span class="comment">#   p.fields  指定顺序</span></div><div class="line">  <span class="comment"># Returns：</span></div><div class="line">  <span class="comment">#   array</span></div><div class="line">  </div><div class="line">  tmp &lt;- array()</div><div class="line">  <span class="keyword">for</span> (i <span class="keyword">in</span> p.fields) {</div><div class="line">    tmp[i] &lt;- p.arr[i]</div><div class="line">  }</div><div class="line">  </div><div class="line">  <span class="comment"># 去掉缺失值</span></div><div class="line">  tmp[!is.na(tmp)]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>这个方式比较曲折，应该有更直接的方式的。</p>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/R/">R</a><a href="/tags/经验/">经验</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/10/11/2013-10-11-big-data-enterprice-finance/">国内外大数据创业企业的融资情况</a></h1>
  

    <time datetime="2013-10-10T16:00:00.000Z">
  <span class="day">11</span><span class="month">10月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="大数据行业融资情况">大数据行业融资情况</h3>
<p>业余时间整理的，见：<a href="https://docs.google.com/spreadsheet/ccc?key=0AtdtDh06pqwEdHpXUHZQVzZLb0k4U09mUjJqV1gyVWc&amp;usp=sharing" target="_blank" rel="external">https://docs.google.com/spreadsheet/ccc?key=0AtdtDh06pqwEdHpXUHZQVzZLb0k4U09mUjJqV1gyVWc&amp;usp=sharing</a></p>
<p>另推荐视频：<a href="http://v.youku.com/v_show/id_XNTkyNDI1OTcy.html" target="_blank" rel="external">http://v.youku.com/v_show/id_XNTkyNDI1OTcy.html</a></p>
<p>及网站：<a href="https://angel.co/big-data" target="_blank" rel="external">https://angel.co/big-data</a></p>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/大数据/">大数据</a><a href="/tags/创业/">创业</a><a href="/tags/融资/">融资</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/09/06/2013-09-06-R语言的小技巧/">R语言的小技巧</a></h1>
  

    <time datetime="2013-09-05T16:00:00.000Z">
  <span class="day">6</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h3 id="ifelse和if_…_else_…不同">ifelse和if … else …不同</h3>
<p>认为相同，主要是受到之前经验的影响，不过这里的ifelse是向量化的运算，返回值的长度会和test的长度一致。可以看ifelse的源码：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> (test, yes, no) </div><div class="line">{</div><div class="line">    <span class="keyword">if</span> (is.atomic(test)) </div><div class="line">        storage.mode(test) &lt;- <span class="string">"logical"</span></div><div class="line">    <span class="keyword">else</span> test &lt;- <span class="keyword">if</span> (isS4(test)) </div><div class="line">        as(test, <span class="string">"logical"</span>)</div><div class="line">    <span class="keyword">else</span> as.logical(test)</div><div class="line">    ans &lt;- test</div><div class="line">    ok &lt;- !(nas &lt;- is.na(test))</div><div class="line">    <span class="keyword">if</span> (any(test[ok])) </div><div class="line">        ans[test & ok] &lt;- rep(yes, length.out = length(ans))[test & </div><div class="line">            ok]</div><div class="line">    <span class="keyword">if</span> (any(!test[ok])) </div><div class="line">        ans[!test & ok] &lt;- rep(no, length.out = length(ans))[!test & </div><div class="line">            ok]</div><div class="line">    ans[nas] &lt;- <span class="literal">NA</span></div><div class="line">    ans</div><div class="line">}</div></pre></td></tr></table></figure>



<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; ifelse(c(<span class="literal">T</span>, <span class="literal">F</span>, <span class="literal">T</span>), c(<span class="number">1</span>,<span class="number">2</span>), c(<span class="number">5</span>,<span class="number">6</span>))  <span class="comment"># 长度不够，则会自动补充</span></div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">6</span> <span class="number">1</span></div></pre></td></tr></table></figure>

<h3 id="install_RCurld的问题">install RCurld的问题</h3>
<p>在ubuntu12.04上安装：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">install.packages(<span class="string">"RCurl"</span>)</div></pre></td></tr></table></figure>

<p>提示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">checking <span class="keyword">for</span> curl-config... no</div><div class="line">Cannot <span class="keyword">find</span> curl-config</div><div class="line">ERROR: configuration failed <span class="keyword">for</span> <span class="keyword">package</span> ‘RCurl’</div></pre></td></tr></table></figure>

<p>解决：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install libcurl4-gnutls-dev</div></pre></td></tr></table></figure>

<p>附: <a href="http://cos.name/cn/topic/108303" target="_blank" rel="external">http://cos.name/cn/topic/108303</a></p>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/R/">R</a><a href="/tags/经验/">经验</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/09/05/2013-09-05-sed命令/">sed命令</a></h1>
  

    <time datetime="2013-09-04T16:00:00.000Z">
  <span class="day">5</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h2 id="问题">问题</h2>
<p>源数据：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">28</span>&<span class="variable">at=</span><span class="number">7</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">29</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>Q4ETETM9Hjx0</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">39</span>&<span class="variable">at=</span><span class="number">0</span>&<span class="variable">cid=</span>ytBSubxEaFN6</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">40</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">42</span>&<span class="variable">at=</span><span class="number">6</span>&<span class="variable">cid=</span>ytBSubxEaFN6</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">42</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">45</span>&<span class="variable">at=</span><span class="number">0</span>&<span class="variable">cid=</span><span class="number">66</span>OwWFuVBMSS</div></pre></td></tr></table></figure>

<p>希望把drt字段中的+号及后面的替换掉：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed 's/<span class="command">\+</span><span class="special">[</span><span class="command">\d</span>:<span class="special">]</span>+<span class="special">&</span>/<span class="special">&</span>/g'</div></pre></td></tr></table></figure>

<p>结果就是死活不工作。。。</p>
<h2 id="解决">解决</h2>
<p>原来&amp;在sed中也是元字符，之前从来没注意到这个，和普通正则还差异多多。最后就只是一个转义符的事情：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed 's/<span class="command">\+</span>/<span class="command">\&</span>/g'</div></pre></td></tr></table></figure>

<p>关于&amp;的说明：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">保存搜索字符用来替换其他字符，如s/love<span class="javadoc">/**&**/</span>，love这成**love**。</div></pre></td></tr></table></figure>

<p>还有：</p>
<ul>
<li>sed的元字符里原来没有+号的。。。</li>
<li>\d发现也是无效的</li>
</ul>
<p>最终就变成了：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed 's/+<span class="special">[</span>0-9:<span class="special">]</span>*<span class="command">\&</span>/<span class="command">\&</span>/g'</div></pre></td></tr></table></figure>

<h2 id="附录">附录</h2>
<ul>
<li>sed的元字符：<a href="http://tsnc.zhongaokao.com/tsnc_wgrj/doc/sed.htm#id2810450" target="_blank" rel="external">http://tsnc.zhongaokao.com/tsnc_wgrj/doc/sed.htm#id2810450</a></li>
<li>sed manual：<a href="http://www.gnu.org/software/sed/manual/sed.html" target="_blank" rel="external">http://www.gnu.org/software/sed/manual/sed.html</a></li>
<li>grep、sed、awk、perl等对正则表达式的支持的差别：<a href="http://blog.csdn.net/zouxue138/article/details/8620799" target="_blank" rel="external">http://blog.csdn.net/zouxue138/article/details/8620799</a></li>
</ul>

    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/linux/">linux</a><a href="/tags/sed/">sed</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/09/05/2013-09-05-R中vector和names函数/">R中vector和names函数</a></h1>
  

    <time datetime="2013-09-04T16:00:00.000Z">
  <span class="day">5</span><span class="month">9月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h2 id="问题">问题</h2>
<p>源数据保存在文件中，格式如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">28</span>&<span class="variable">at=</span><span class="number">7</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">29</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>Q4ETETM9Hjx0</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">39</span>&<span class="variable">at=</span><span class="number">0</span>&<span class="variable">cid=</span>ytBSubxEaFN6</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">40</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">42</span>&<span class="variable">at=</span><span class="number">6</span>&<span class="variable">cid=</span>ytBSubxEaFN6</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">42</span>&<span class="variable">at=</span><span class="number">3</span>&<span class="variable">cid=</span>mDamz1b7WRJZ</div><div class="line"><span class="variable">drt=</span><span class="number">2013</span>-<span class="number">09</span>-<span class="number">02</span>+<span class="number">22</span>:<span class="number">14</span>:<span class="number">45</span>&<span class="variable">at=</span><span class="number">0</span>&<span class="variable">cid=</span><span class="number">66</span>OwWFuVBMSS</div></pre></td></tr></table></figure>

<p>需要生成一个list，其下标是数据的字段名：drt，at，cid</p>
<h2 id="解决">解决</h2>
<p>开始写成这样，很别扭的代码：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">x &lt;- scan(filename, what=<span class="string">""</span>, sep=<span class="string">"&"</span>, nlines=<span class="number">1</span>)</div><div class="line">fields.name &lt;- sapply(x, FUN=<span class="keyword">function</span>(x){strsplit(x, split=<span class="string">"="</span>)[[<span class="number">1</span>]][<span class="number">1</span>]})</div><div class="line">names(fields.name) &lt;- <span class="literal">NULL</span></div><div class="line">names(fields.name) &lt;- fields.name</div><div class="line">fields.name &lt;- as.list(fields.name)</div></pre></td></tr></table></figure>

<p>借鉴tapply的源码，改成这样：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x &lt;- scan(filename, what=<span class="string">""</span>, sep=<span class="string">"&"</span>, nlines=<span class="number">1</span>)</div><div class="line">fields.name &lt;- sapply(x, FUN=<span class="keyword">function</span>(x){strsplit(x, split=<span class="string">"="</span>)[[<span class="number">1</span>]][<span class="number">1</span>]})</div><div class="line">tmp.fields.name &lt;- vector(<span class="string">"list"</span>, length(fields.name))    <span class="comment"># 生成一个空的list</span></div><div class="line">names(tmp.fields.name) &lt;- fields.name</div></pre></td></tr></table></figure>


    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/R/">R</a><a href="/tags/vector/">vector</a><a href="/tags/names/">names</a></div>

      
    </footer>
    
  </div>
  
</article>


<nav id="pagenavi">
  
  
    <a href="/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div>
  <footer id="footer" class="inner"><div class="social alignright">
  
  
  
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>
  
  &copy; 2014 Alex Cai
  
</p>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
    try {
        $('.fancybox').fancybox();
    } catch(e) {
        console.log('after_footer:fancybox');
    }
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



</body>
</html>